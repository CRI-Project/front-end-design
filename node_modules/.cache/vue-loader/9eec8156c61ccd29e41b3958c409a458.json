{"remainingRequest":"/Users/qiulihao/WebstormProjects/CRI-Project-front-end-design/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiulihao/WebstormProjects/CRI-Project-front-end-design/src/views/Contorl/Control.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiulihao/WebstormProjects/CRI-Project-front-end-design/src/views/Contorl/Control.vue","mtime":1640521918477},{"path":"/Users/qiulihao/WebstormProjects/CRI-Project-front-end-design/node_modules/cache-loader/dist/cjs.js","mtime":1638074846295},{"path":"/Users/qiulihao/WebstormProjects/CRI-Project-front-end-design/node_modules/babel-loader/lib/index.js","mtime":1638074846154},{"path":"/Users/qiulihao/WebstormProjects/CRI-Project-front-end-design/node_modules/cache-loader/dist/cjs.js","mtime":1638074846295},{"path":"/Users/qiulihao/WebstormProjects/CRI-Project-front-end-design/node_modules/vue-loader/lib/index.js","mtime":1638074906194}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Z2V0TGlzdCwgY2hhbmdlU3RhdGUsIGdldFN0YXRlfSBmcm9tICIuLi8uLi9hcGkvaG9tZUFQSSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkNvbnRyb2wiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBoZWFkZXJzOiBbCiAgICAgICAge3RleHQ6ICdEZXZpY2UgTmFtZScsIHZhbHVlOiAncHJvY2Vzc29yQ29kZSd9LAogICAgICAgIHt0ZXh0OiAnVXBkYXRlIFRpbWUnLCB2YWx1ZTogJ2RhdGVUaW1lJ30sCiAgICAgICAge3RleHQ6ICdUZW1wKMuaQyknLCB2YWx1ZTogJ3RlbXBlcmF0dXJlJ30sCiAgICAgICAge3RleHQ6ICdDTzIocHBtKScsIHZhbHVlOiAncHBtJ30sCiAgICAgICAge3RleHQ6ICdIdW1pZGl0eSglKScsIHZhbHVlOiAnaHVtaWRpdHknfSwKICAgICAgICB7dGV4dDogJ1N3aXRjaCcsIHZhbHVlOiAnc3dpdGNoJywgc29ydGFibGU6IGZhbHNlfSwKICAgICAgXSwKICAgICAgc2Vuc29yVGFibGU6IFtdLAogICAgICBzd2l0Y2hTdGF0ZTogdHJ1ZSwKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHF1ZXJ5KCkgewogICAgICBnZXRMaXN0KCkudGhlbihyZXMgPT4gewogICAgICAgIC8vIHRoaXMuc2Vuc29yVGFibGVbcGFyc2VJbnQocmVzLmRhdGEucHJvY2Vzc29yQ29kZSktMV0gPSByZXMuZGF0YTsKICAgICAgICB0aGlzLnNlbnNvclRhYmxlLnBvcCgpCiAgICAgICAgdGhpcy5zZW5zb3JUYWJsZS5wdXNoKHJlcy5kYXRhKQogICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGVycikKICAgICAgfSkKICAgIH0sCiAgICBjaGFuZ2VTZW5zb3JTdGF0ZSgpIHsKICAgICAgY2hhbmdlU3RhdGUoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKQogICAgICAgIGlmIChyZXMuZGF0YSA9PT0gMSkgewogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goIm1lc3NhZ2Uvb3BlblNuYWNrYmFyIiwgewogICAgICAgICAgICBtc2c6ICJTZW5zb3IgRW5nYWdlZCBTdWNjZXNzISIsCiAgICAgICAgICAgIGNvbG9yOiAic3VjY2VzcyIsCiAgICAgICAgICB9KQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgibWVzc2FnZS9vcGVuU25hY2tiYXIiLCB7CiAgICAgICAgICAgIG1zZzogIllvdSBDbG9zZSB0aGUgU2Vuc29yISIsCiAgICAgICAgICAgIGNvbG9yOiAiZXJyb3IiLAogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKQogICAgICB9KQogICAgfSwKCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5xdWVyeSgpCiAgICBnZXRTdGF0ZSgpLnRoZW4ocmVzID0+IHsKICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YTsKICAgICAgdGhpcy5zd2l0Y2hTdGF0ZSA9IGRhdGEgPT09IDE7CiAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgfSkKICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgIHNldFRpbWVvdXQodGhpcy5xdWVyeSwgMCkKICAgIH0sIDEwMDAgKiAxMCkKICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpOwogICAgdGhpcy50aW1lciA9IG51bGw7CiAgfSwKfQo="},{"version":3,"sources":["Control.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Control.vue","sourceRoot":"src/views/Contorl","sourcesContent":["<template>\n  <div>\n\n    <v-data-table\n        :headers=\"headers\"\n        :items=\"sensorTable\"\n        :items-per-page=\"10\"\n        class=\"elevation-1\"\n    >\n      <template v-slot:item.switch=\"{item}\">\n        <v-switch\n            v-model=\"item.switchState\"\n            @click=\"changeSensorState\"\n        ></v-switch>\n      </template>\n    </v-data-table>\n  </div>\n</template>\n\n<script>\nimport {getList, changeState, getState} from \"../../api/homeAPI\";\n\nexport default {\n  name: \"Control\",\n  data() {\n    return {\n      headers: [\n        {text: 'Device Name', value: 'processorCode'},\n        {text: 'Update Time', value: 'dateTime'},\n        {text: 'Temp(ËšC)', value: 'temperature'},\n        {text: 'CO2(ppm)', value: 'ppm'},\n        {text: 'Humidity(%)', value: 'humidity'},\n        {text: 'Switch', value: 'switch', sortable: false},\n      ],\n      sensorTable: [],\n      switchState: true,\n    }\n  },\n  methods: {\n    query() {\n      getList().then(res => {\n        // this.sensorTable[parseInt(res.data.processorCode)-1] = res.data;\n        this.sensorTable.pop()\n        this.sensorTable.push(res.data)\n      }).catch(err => {\n        console.log(err)\n      })\n    },\n    changeSensorState() {\n      changeState().then(res => {\n        console.log(res)\n        if (res.data === 1) {\n          this.$store.dispatch(\"message/openSnackbar\", {\n            msg: \"Sensor Engaged Success!\",\n            color: \"success\",\n          })\n        } else {\n          this.$store.dispatch(\"message/openSnackbar\", {\n            msg: \"You Close the Sensor!\",\n            color: \"error\",\n          })\n        }\n      }).catch(err => {\n        console.log(err)\n      })\n    },\n\n  },\n  mounted() {\n    this.query()\n    getState().then(res => {\n      let data = res.data;\n      this.switchState = data === 1;\n    }).catch(err => {\n      console.log(err);\n    })\n    this.timer = setInterval(() => {\n      setTimeout(this.query, 0)\n    }, 1000 * 10)\n  },\n  beforeDestroy() {\n    clearInterval(this.timer);\n    this.timer = null;\n  },\n}\n</script>\n\n<style scoped>\n\n</style>"]}]}